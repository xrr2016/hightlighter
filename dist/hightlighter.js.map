{"version":3,"sources":["../src/hightlighter.js"],"names":["body","document","documentElement","defaultOpts","container","backgroundColor","color","idLength","HightLighter","opts","elements","key","hasOwnProperty","randomId","bind","bindEvent","selectedText","window","getSelection","toString","id","length","mainContent","innerHTML","markText","replace","push","getElementById","addEventListener","n","letters","Math","floor","random","hightlight"],"mappings":";;;;;;AAAA,IAAMA,OAAOC,SAASD,IAAT,IAAiBC,SAASC,eAAT,CAAyBF,IAAvD;;AAEA,IAAMG,cAAc;AAClBC,aAAWJ,IADO;AAElBK,mBAAiB,SAFC;AAGlBC,SAAO,SAHW;AAIlBC,YAAU;AAJQ,CAApB;;IAOMC,Y;AACJ,0BAAuB;AAAA,QAAXC,IAAW,uEAAJ,EAAI;;AAAA;;AACrB,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAK,IAAIC,GAAT,IAAgBR,WAAhB,EAA6B;AAC3B,UAAIA,YAAYS,cAAZ,CAA2BD,GAA3B,CAAJ,EAAqC;AACnC,YAAI,CAAC,KAAKF,IAAL,CAAUE,GAAV,CAAL,EAAqB;AACnB,eAAKF,IAAL,CAAUE,GAAV,IAAiBR,YAAYQ,GAAZ,CAAjB;AACD;AACF;AACD,WAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACD;AACD,SAAKC,SAAL,CAAe,KAAKN,IAAL,CAAUL,SAAzB;AACD;;;;+BAEU;AACT,UAAMY,eAAeC,OAAOC,YAAP,GAAsBC,QAAtB,EAArB;AACA,UAAMC,KAAK,KAAKP,QAAL,CAAc,KAAKJ,IAAL,CAAUF,QAAxB,CAAX;AACA,UAAIS,aAAaK,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,YAAMC,cAAc,KAAKb,IAAL,CAAUL,SAAV,CAAoBmB,SAAxC;AACA,YAAMC,8CAA4C,KAAKf,IAAL,CAAUJ,eAAtD,gBAAgF,KAAKI,IAAL,CAAUH,KAA1F,eAAyGc,EAAzG,UAAgHJ,YAAhH,YAAN;;AAEA,aAAKP,IAAL,CAAUL,SAAV,CAAoBmB,SAApB,GAAgCD,YAAYG,OAAZ,CAAoBT,YAApB,EAAkCQ,QAAlC,CAAhC;AACA,aAAKd,QAAL,CAAcgB,IAAd,CAAmBzB,SAAS0B,cAAT,CAAwBP,EAAxB,CAAnB;AACD;AACF;;;8BAEShB,S,EAAW;AACnBA,gBAAUwB,gBAAV,CAA2B,SAA3B,EAAsC,KAAKJ,QAAL,CAAcV,IAAd,CAAmB,IAAnB,CAAtC;AACD;;;6BAEQe,C,EAAG;AACV,UAAIA,KAAK,CAAT,EAAY;AACV;AACD;AACD,UAAMC,UAAU,sCAAhB;AACA,UAAIV,KAAK,EAAT;AACA,aAAOA,GAAGC,MAAH,GAAYQ,CAAnB,EAAsB;AACpBT,cAAMU,QAAQC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBH,QAAQT,MAAnC,CAAR,CAAN;AACD;AACD,aAAOD,EAAP;AACD;;;;;;AAIH,IAAMc,aAAa,SAAbA,UAAa,CAACzB,IAAD,EAAU;AAC3B,SAAO,IAAID,YAAJ,CAAiBC,IAAjB,CAAP;AACD,CAFD;;AAIAQ,OAAOT,YAAP,GAAsBA,YAAtB;AACAS,OAAOiB,UAAP,GAAoBA,UAApB;;AAEA","file":"hightlighter.js","sourcesContent":["const body = document.body || document.documentElement.body\r\n\r\nconst defaultOpts = {\r\n  container: body,\r\n  backgroundColor: '#59b9c6',\r\n  color: '#ffffff',\r\n  idLength: 10,\r\n}\r\n\r\nclass HightLighter {\r\n  constructor(opts = {}) {\r\n    this.opts = opts\r\n    this.elements = []\r\n    for (let key in defaultOpts) {\r\n      if (defaultOpts.hasOwnProperty(key)) {\r\n        if (!this.opts[key]) {\r\n          this.opts[key] = defaultOpts[key]\r\n        }\r\n      }\r\n      this.randomId = this.randomId.bind(this)\r\n    }\r\n    this.bindEvent(this.opts.container)\r\n  }\r\n\r\n  markText() {\r\n    const selectedText = window.getSelection().toString()\r\n    const id = this.randomId(this.opts.idLength)\r\n    if (selectedText.length > 0) {\r\n      const mainContent = this.opts.container.innerHTML\r\n      const markText = `<span style=\"background-color:${this.opts.backgroundColor};color: ${this.opts.color};\" id=\"${id}\">${selectedText}</span>`\r\n\r\n      this.opts.container.innerHTML = mainContent.replace(selectedText, markText)\r\n      this.elements.push(document.getElementById(id))\r\n    }\r\n  }\r\n\r\n  bindEvent(container) {\r\n    container.addEventListener('mouseup', this.markText.bind(this))\r\n  }\r\n\r\n  randomId(n) {\r\n    if (n <= 0) {\r\n      return\r\n    }\r\n    const letters = 'abcdefghijklmnopqrstuvwxyz0123456789'\r\n    let id = ''\r\n    while (id.length < n) {\r\n      id += letters[Math.floor(Math.random() * letters.length)]\r\n    }\r\n    return id\r\n  }\r\n\r\n}\r\n\r\nconst hightlight = (opts) => {\r\n  return new HightLighter(opts)\r\n}\r\n\r\nwindow.HightLighter = HightLighter\r\nwindow.hightlight = hightlight\r\n\r\n// export default hightlight"]}